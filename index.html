<!DOCTYPE html>
<html>
<head>
    <title>Salary Budget Tracker</title>
    <style>
        body { font-family: Arial; margin: 20px; }
        .card { border: 1px solid #ccc; padding: 15px; margin-bottom: 20px; border-radius: 8px; }
        h2 { margin-top: 0; }
    </style>
</head>
<body>
    <h1>Salary Budget Tracker (15th & 30th)</h1>

    {% for cutoff, info in results.items() %}
    <div class="card">
        <h2>{{ cutoff }} Cutoff</h2>
        <form method="POST">
            <input type="hidden" name="cutoff" value="{{ cutoff }}">
            <p><strong>Salary:</strong> 
                <input type="number" step="0.01" name="salary" value="{{ info.salary }}">
                <button type="submit">Update</button>
            </p>

            <h3>Add Bill</h3>
            <input type="text" name="bill_name" placeholder="Name" required>
            <input type="number" step="0.01" name="bill_amount" placeholder="Amount" required>
            <button type="submit">Add</button>
        </form>

        <h3>Bills</h3>
        <ul>
            {% for bill in info.bills %}
            <li>{{ bill.name }} - ₱{{ bill.amount }}
                <a href="{{ url_for('delete', cutoff=cutoff, bill_id=loop.index0) }}">❌</a>
            </li>
            {% endfor %}
        </ul>
        <p><strong>Total Bills:</strong> ₱{{ info.total_bills }}</p>

        <h3>Summary</h3>
        <p>Salary: ₱{{ info.salary }}</p>
        <p>Future Fund (20%): ₱{{ info.future_fund }}</p>
        <p>Flex Money: ₱{{ info.flex_money }}</p>
    </div>
    {% endfor %}

    <div class="card">
        <h2>Monthly Totals</h2>
        <p><strong>Total Future Fund:</strong> ₱{{ total_future }}</p>
        <p><strong>Total Flex Money:</strong> ₱{{ total_flex }}</p>
    </div>
</body>
</html>
